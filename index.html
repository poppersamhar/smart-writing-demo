<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å†™ä½œåŠ©æ‰‹</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            background: white;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
        }

        .app-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-btn {
            padding: 6px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
        }

        .header-btn:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .header-btn i {
            font-size: 14px;
            color: #495057;
        }

        /* APIé…ç½®å¼¹çª— */
        .config-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .config-modal.show {
            display: flex;
        }

        .config-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .config-content h3 {
            margin: 0 0 20px 0;
            color: #495057;
            font-size: 1.3rem;
        }

        .config-content input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .config-content input:focus {
            outline: none;
            border-color: #667eea;
        }

        .config-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .config-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .config-actions .save-btn {
            background: #28a745;
            color: white;
        }

        .config-actions .save-btn:hover {
            background: #218838;
        }

        .config-actions .cancel-btn {
            background: #6c757d;
            color: white;
        }

        .config-actions .cancel-btn:hover {
            background: #5a6268;
        }

        /* è°ƒè¯•é¢æ¿ */
        .debug-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 12px;
            max-width: 300px;
            z-index: 999;
            display: none;
        }

        .debug-panel.show {
            display: block;
        }

        .debug-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 12px;
            z-index: 999;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            padding: 20px 30px;
            display: flex;
            flex-direction: column;
        }

        /* æ¬¢è¿åŒºåŸŸ */
        .welcome-section {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 25px;
        }

        .welcome-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .welcome-subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 25px;
        }

        .suggestion-questions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
        }

        .suggestion-question {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            padding: 15px 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .suggestion-question:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.95);
        }

        .suggestion-question i {
            font-size: 1.2rem;
            color: #667eea;
            flex-shrink: 0;
        }

        .suggestion-question span {
            font-size: 0.95rem;
            color: #333;
            line-height: 1.4;
        }

        /* è¾“å‡ºåŒºåŸŸ */
        .output-section {
            flex: 1;
            margin-bottom: 25px;
        }

        .output-header {
            margin-bottom: 15px;
        }

        .output-text {
            width: 100%;
            min-height: 500px;
            padding: 25px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 50%, #f5f9ff 100%);
            font-size: 14px;
            line-height: 1.6;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);
            backdrop-filter: blur(10px);
        }

        /* èŠå¤©å¯¹è¯æ ·å¼ */
        .chat-history {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }

        .user-message {
            align-self: flex-end;
        }

        .ai-message {
            align-self: flex-start;
        }

        .message-content {
            padding: 15px 18px;
            border-radius: 18px;
            position: relative;
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .ai-message .message-content {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-bottom-left-radius: 6px;
            backdrop-filter: blur(5px);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 12px;
            opacity: 0.8;
        }

        .user-name, .ai-name {
            font-weight: 600;
        }

        .message-time {
            font-size: 11px;
        }

        .message-text {
            line-height: 1.5;
            word-wrap: break-word;
        }

        .message-operation {
            margin-top: 8px;
            font-size: 11px;
            opacity: 0.8;
            font-style: italic;
        }

        /* å¤åˆ¶å›å¤æŒ‰é’® */
        .copy-reply-btn {
            position: absolute;
            bottom: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            border: none;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .ai-message .message-content:hover .copy-reply-btn {
            opacity: 1;
        }

        .copy-reply-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: scale(1.1);
        }

        .copy-reply-btn i {
            font-size: 10px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            flex-wrap: wrap;
            justify-content: flex-start;
            padding: 8px 0 2px 0;
            border-top: 1px solid #f0f0f0;
        }

        /* æ¨¡å‹é€‰æ‹©å™¨ */
        .model-selector {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .model-selector label {
            font-weight: 500;
            color: #495057;
            font-size: 12px;
        }

        .model-selector select {
            padding: 6px 10px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            background: white;
            font-size: 12px;
            transition: border-color 0.3s ease;
        }

        .model-selector select:focus {
            outline: none;
            border-color: #667eea;
        }

        /* æ“ä½œæŒ‰é’® */
        .operation-buttons {
            display: flex;
            gap: 6px;
        }

        .operation-btn {
            padding: 6px 12px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            background: white;
            color: #495057;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .operation-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .operation-btn i {
            font-size: 12px;
        }

        .operation-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* åº•éƒ¨è¾“å…¥åŒºåŸŸ */
        .bottom-input-section {
            background: white;
            padding: 2px 30px 15px 30px;
        }

        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 100%;
            margin: 0 auto;
        }

        .input-field {
            flex: 1;
            position: relative;
        }

        #input-text {
            width: 100%;
            height: 40px;
            padding: 10px 15px;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
            resize: none;
            outline: none;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        #input-text:focus {
            border-color: #667eea;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* å‘é€æŒ‰é’® */
        .send-btn {
            position: absolute;
            bottom: 8px;
            right: 8px;
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .send-btn i {
            font-size: 12px;
        }



        /* æ–‡ä»¶ä¸Šä¼  */
        .file-upload {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .upload-btn {
            padding: 6px 12px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .upload-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .upload-btn i {
            font-size: 12px;
        }

        .file-info {
            padding: 6px 12px;
            background: #e9ecef;
            border-radius: 6px;
            font-size: 12px;
            color: #6c757d;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-section {
            flex: 1;
            margin-bottom: 20px;
        }

        .input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .input-header h3 {
            color: #495057;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .action-btn {
            padding: 6px 12px;
            border: 1px solid #e9ecef;
            background: white;
            color: #6c757d;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .action-btn:hover {
            background: #f8f9fa;
            border-color: #667eea;
            color: #667eea;
        }



        #input-text {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            resize: vertical;
            font-size: 14px;
            line-height: 1.6;
            transition: border-color 0.3s ease;
        }

        #input-text:focus {
            outline: none;
            border-color: #667eea;
        }

        /* è¾“å‡ºåŒºåŸŸ */
        .output-section {
            flex: 1;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .output-header h3 {
            color: #495057;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .output-text {
            width: 100%;
            min-height: 180px;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
            font-size: 14px;
            line-height: 1.6;
            overflow-y: auto;
        }

        .placeholder {
            text-align: center;
            color: #6c757d;
            padding: 40px 20px;
        }

        .placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #667eea;
        }

        .placeholder p {
            font-size: 16px;
        }

        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-spinner {
            background: white;
            padding: 30px 40px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .loading-spinner i {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .loading-spinner p {
            color: #495057;
            font-weight: 500;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                margin: 0;
                border-radius: 0;
                max-width: 100%;
                box-shadow: none;
            }
            
            .top-header {
                padding: 10px 15px;
            }
            
            .app-name {
                font-size: 1.3rem;
            }
            
            .main-content {
                padding: 15px 20px;
            }
            
            .welcome-section {
                padding: 20px 10px;
            }
            
            .welcome-title {
                font-size: 1.5rem;
            }
            
            .output-text {
                min-height: 450px;
                padding: 20px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .message-content {
                padding: 12px 15px;
            }
            
            .copy-reply-btn {
                width: 20px;
                height: 20px;
                bottom: 6px;
                right: 6px;
            }
            
            .copy-reply-btn i {
                font-size: 9px;
            }
            
            .send-btn {
                width: 24px;
                height: 24px;
                bottom: 6px;
                right: 6px;
            }
            
            .send-btn i {
                font-size: 10px;
            }
            
            .suggestion-questions {
                max-width: 100%;
            }
            
            .suggestion-question {
                padding: 12px 15px;
            }
            
            .suggestion-question span {
                font-size: 0.9rem;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: stretch;
                gap: 4px;
                margin-bottom: 8px;
                padding: 6px 0 2px 0;
            }
            
            .operation-buttons {
                justify-content: center;
            }
            
            .model-selector {
                justify-content: center;
            }
            
            .bottom-input-section {
                padding: 1px 20px 10px 20px;
            }
            
            .input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .file-upload {
                justify-content: center;
            }
            
            .file-upload {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .top-header {
                padding: 8px 10px;
            }
            
            .app-name {
                font-size: 1.2rem;
            }
            
            .header-actions {
                gap: 8px;
            }
            
            .header-btn {
                width: 26px;
                height: 26px;
                font-size: 10px;
            }
            
            .main-content {
                padding: 10px 15px;
            }
            
            .welcome-section {
                padding: 15px 8px;
            }
            
            .welcome-title {
                font-size: 1.3rem;
            }
            
            .suggestion-questions {
                max-width: 100%;
            }
            
            .suggestion-question {
                padding: 10px 12px;
            }
            
            .suggestion-question span {
                font-size: 0.85rem;
            }
            
            .output-text {
                min-height: 400px;
                padding: 15px;
            }
            
            .message {
                max-width: 95%;
            }
            
            .message-content {
                padding: 10px 12px;
            }
            
            .copy-reply-btn {
                width: 18px;
                height: 18px;
                bottom: 5px;
                right: 5px;
            }
            
            .copy-reply-btn i {
                font-size: 8px;
            }
            
            .send-btn {
                width: 22px;
                height: 22px;
                bottom: 5px;
                right: 5px;
            }
            
            .send-btn i {
                font-size: 9px;
            }
            
            .message-header {
                font-size: 11px;
            }
            
            .control-panel {
                gap: 6px;
                padding: 5px 0 1px 0;
            }
            
            .operation-btn {
                padding: 5px 10px;
                font-size: 11px;
            }
            
            .model-selector select {
                padding: 5px 8px;
                font-size: 11px;
            }
            
            .bottom-input-section {
                padding: 0px 15px 8px 15px;
            }
            
            #input-text {
                height: 35px;
                font-size: 12px;
            }
            

        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* æ¶ˆæ¯æç¤ºæ ·å¼ */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="top-header">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="app-name">è¶…çº§åŠ©ç†</div>
            </div>
            <div class="header-actions">
                <button id="config-btn" class="header-btn" title="è®¾ç½®">
                    <i class="fas fa-cog"></i>
                </button>
                <button id="profile-btn" class="header-btn" title="ä¸ªäººä¸»é¡µ">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- è¾“å‡ºåŒºåŸŸ -->
            <div class="output-section">
                <div class="output-header">
                </div>
                <div id="output-text" class="output-text">
                    <!-- æ¬¢è¿åŒºåŸŸ -->
                    <div class="welcome-section">
                        <div class="welcome-title">Hi, æ™šä¸Šå¥½! è¾›è‹¦äº†, æŠ«æ˜Ÿæˆ´æœˆçš„ä½ </div>
                        <div class="welcome-subtitle">æˆ‘æ˜¯ä½ çš„å·¥ä½œåŠ©ç†, å¿«æ¥è¯•ç€ç»™æˆ‘æé—®å§</div>
                        <div style="margin-bottom: 20px; color: #666;">å¿«æ¥è¯•è¯•è¿™äº›ç”¨æ³•</div>
                                        <div class="suggestion-questions">
                    <div class="suggestion-question" onclick="startConversation('summarize', 'è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å’Œä¸»è¦é‡Œç¨‹ç¢‘')">
                        <i class="fas fa-compress-alt"></i>
                        <span>è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å’Œä¸»è¦é‡Œç¨‹ç¢‘</span>
                    </div>
                    <div class="suggestion-question" onclick="startConversation('expand', 'è¯·å¸®æˆ‘æ‰©å†™å…³äºäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„å†…å®¹')">
                        <i class="fas fa-expand-alt"></i>
                        <span>è¯·å¸®æˆ‘æ‰©å†™å…³äºäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„å†…å®¹</span>
                    </div>
                    <div class="suggestion-question" onclick="startConversation('continue', 'éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©')">
                        <i class="fas fa-arrow-right"></i>
                        <span>éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©</span>
                    </div>
                </div>
                    </div>
                    <div class="result-content">
                        <p></p>
                    </div>
                </div>
            </div>
            
            <!-- æ§åˆ¶é¢æ¿ -->
            <div class="control-panel">
                <!-- æ¨¡å‹é€‰æ‹© -->
                <div class="model-selector">
                    <label for="model-select">æ¨¡å‹ï¼š</label>
                    <select id="model-select">
                        <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo (å…è´¹)</option>
                        <option value="gpt-4o">GPT-4o (å…è´¹)</option>
                        <option value="gpt-4o-mini">GPT-4o Mini (å…è´¹)</option>
                        <option value="gpt-4-turbo">GPT-4 Turbo (å…è´¹)</option>
                    </select>
                </div>
                
                <!-- æ–‡ä»¶ä¸Šä¼  -->
                <div class="file-upload">
                    <label for="file-input" class="upload-btn">
                        <i class="fas fa-upload"></i>
                        ä¸Šä¼ PDF
                    </label>
                    <input type="file" id="file-input" accept=".pdf" style="display: none;">
                </div>
                
                <!-- æ“ä½œæŒ‰é’® -->
                <div class="operation-buttons">
                    <button class="operation-btn" data-operation="summarize">
                        <i class="fas fa-compress-alt"></i>
                        æ€»ç»“
                    </button>
                    <button class="operation-btn" data-operation="expand">
                        <i class="fas fa-expand-alt"></i>
                        æ‰©å†™
                    </button>
                    <button class="operation-btn" data-operation="continue">
                        <i class="fas fa-arrow-right"></i>
                        ç»­å†™
                    </button>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨è¾“å…¥åŒºåŸŸ -->
        <div class="bottom-input-section">
            <div class="input-container">
                <div class="input-field">
                    <textarea id="input-text" placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜"></textarea>
                    <button class="send-btn" onclick="handleSend()" title="å‘é€">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            <div id="file-info" class="file-info" style="display: none;"></div>
        </div>
        
        <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
        <div id="loading" class="loading-overlay" style="display: none;">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>æ­£åœ¨å¤„ç†ä¸­...</p>
            </div>
        </div>

        <!-- APIé…ç½®å¼¹çª— -->
        <div id="config-modal" class="config-modal">
            <div class="config-content">
                <h3><i class="fas fa-key"></i> é…ç½®APIå¯†é’¥</h3>
                
                <!-- APIç±»å‹é€‰æ‹© -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">é€‰æ‹©APIç±»å‹ï¼š</label>
                    <select id="config-api-type" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="free" selected>å…è´¹API (æ¨è)</option>
                        <option value="openai">OpenAI</option>
                        <option value="huggingface">Hugging Face</option>
                        <option value="ollama">Ollama (æœ¬åœ°)</option>
                    </select>
                </div>
                
                <!-- å…è´¹APIé…ç½® -->
                <div id="free-config" class="api-config-section">
                    <p style="color: #28a745; margin-bottom: 15px; font-size: 14px;">
                        âœ… <strong>å…è´¹APIæœåŠ¡</strong> - æ— éœ€é…ç½®ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼
                    </p>
                    <p style="color: #6c757d; margin-bottom: 15px; font-size: 14px;">
                        æˆ‘ä»¬æä¾›å®Œå…¨å…è´¹çš„AIå†™ä½œæœåŠ¡ï¼Œæ”¯æŒæ€»ç»“ã€æ‰©å†™ã€ç»­å†™åŠŸèƒ½ã€‚æ— éœ€æ³¨å†Œï¼Œæ— éœ€APIå¯†é’¥ï¼Œç«‹å³å¼€å§‹ä½¿ç”¨ï¼
                    </p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                        <h4 style="margin: 0 0 10px 0; color: #28a745;">âœ¨ å…è´¹åŠŸèƒ½</h4>
                        <ul style="margin: 0; padding-left: 20px; color: #495057;">
                            <li>ğŸ“ æ™ºèƒ½æ–‡æœ¬æ€»ç»“</li>
                            <li>ğŸš€ å†…å®¹æ‰©å†™å¢å¼º</li>
                            <li>âœï¸ æ™ºèƒ½ç»­å†™åŠŸèƒ½</li>
                            <li>ğŸ†“ å®Œå…¨å…è´¹ä½¿ç”¨</li>
                        </ul>
                    </div>
                </div>
                
                <!-- OpenAIé…ç½® -->
                <div id="openai-config" class="api-config-section" style="display: none;">
                    <p style="color: #6c757d; margin-bottom: 15px; font-size: 14px;">
                        è¯·è¾“å…¥æ‚¨çš„OpenAI APIå¯†é’¥ã€‚æ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦ã€‚è·å–åœ°å€ï¼š<a href="https://platform.openai.com/api-keys" target="_blank" style="color: #667eea;">OpenAIå¹³å°</a>
                    </p>
                    <input type="password" id="openai-api-key" placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <!-- Hugging Faceé…ç½® -->
                <div id="huggingface-config" class="api-config-section" style="display: none;">
                    <p style="color: #6c757d; margin-bottom: 15px; font-size: 14px;">
                        è¯·è¾“å…¥æ‚¨çš„Hugging Face APIå¯†é’¥ã€‚æœ‰å…è´¹é¢åº¦ã€‚è·å–åœ°å€ï¼š<a href="https://huggingface.co/settings/tokens" target="_blank" style="color: #667eea;">Hugging Face</a>
                    </p>
                    <input type="password" id="huggingface-api-key" placeholder="hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <!-- Ollamaé…ç½® -->
                <div id="ollama-config" class="api-config-section" style="display: none;">
                    <p style="color: #6c757d; margin-bottom: 15px; font-size: 14px;">
                        Ollamaæ˜¯æœ¬åœ°è¿è¡Œçš„AIæœåŠ¡ï¼Œå®Œå…¨å…è´¹ã€‚è¯·å…ˆå®‰è£…Ollamaï¼š<a href="https://ollama.ai" target="_blank" style="color: #667eea;">Ollamaå®˜ç½‘</a>
                    </p>
                    <p style="color: #28a745; font-size: 14px;">
                        âœ… æ— éœ€APIå¯†é’¥ï¼Œç›´æ¥ä½¿ç”¨å³å¯
                    </p>
                </div>
                
                <div class="config-actions">
                    <button class="cancel-btn" onclick="closeConfigModal()">å–æ¶ˆ</button>
                    <button class="save-btn" onclick="saveApiKey()">ä¿å­˜</button>
                </div>
            </div>
        </div>

        <!-- è°ƒè¯•é¢æ¿ -->
        <button id="debug-toggle" class="debug-toggle">è°ƒè¯•æ¨¡å¼</button>
        <div id="debug-panel" class="debug-panel">
            <h4>è°ƒè¯•ä¿¡æ¯</h4>
            <div id="debug-content"></div>
        </div>
    </div>
    
    <script>
        // å…¨å±€å˜é‡
        let currentOperation = '';
        let currentModel = 'gpt-3.5-turbo';
        let currentApiType = 'free';

        // DOMå…ƒç´ 
        const inputText = document.getElementById('input-text');
        const outputText = document.getElementById('output-text');
        const modelSelect = document.getElementById('model-select');
        const fileInput = document.getElementById('file-input');
        const fileInfo = document.getElementById('file-info');
        const loading = document.getElementById('loading');


        const configBtn = document.getElementById('config-btn');
        const configModal = document.getElementById('config-modal');
        const configApiTypeSelect = document.getElementById('config-api-type');
        const freeConfig = document.getElementById('free-config');
        const openaiConfig = document.getElementById('openai-config');
        const huggingfaceConfig = document.getElementById('huggingface-config');
        const ollamaConfig = document.getElementById('ollama-config');
        const openaiApiKeyInput = document.getElementById('openai-api-key');
        const huggingfaceApiKeyInput = document.getElementById('huggingface-api-key');
        const debugToggle = document.getElementById('debug-toggle');
        const debugPanel = document.getElementById('debug-panel');
        const debugContent = document.getElementById('debug-content');
        const apiTypeSelect = document.getElementById('api-type');

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
        });

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initializeEventListeners() {
            // æ“ä½œæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.operation-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const operation = this.dataset.operation;
                    handleOperation(operation);
                });
            });

            // APIç±»å‹é€‰æ‹©å˜åŒ–äº‹ä»¶
            apiTypeSelect.addEventListener('change', function() {
                currentApiType = this.value;
                updateModelOptions();
            });

            // æ¨¡å‹é€‰æ‹©å˜åŒ–äº‹ä»¶
            modelSelect.addEventListener('change', function() {
                currentModel = this.value;
            });

            // æ–‡ä»¶ä¸Šä¼ äº‹ä»¶
            fileInput.addEventListener('change', handleFileUpload);





            // è¾“å…¥æ¡†å˜åŒ–äº‹ä»¶
            inputText.addEventListener('change', function() {
                if (this.value.trim()) {
                    enableOperationButtons();
                } else {
                    disableOperationButtons();
                }
            });

            // é…ç½®æŒ‰é’®äº‹ä»¶
            configBtn.addEventListener('click', openConfigModal);
            
            // ä¸ªäººä¸»é¡µæŒ‰é’®äº‹ä»¶
            document.getElementById('profile-btn').addEventListener('click', function() {
                showMessage('ä¸ªäººä¸»é¡µåŠŸèƒ½å¼€å‘ä¸­...', 'info');
            });

            // é…ç½®å¼¹çª—äº‹ä»¶
            configApiTypeSelect.addEventListener('change', updateConfigSection);

            // è°ƒè¯•é¢æ¿äº‹ä»¶
            debugToggle.addEventListener('click', toggleDebugPanel);

            // æ£€æŸ¥æ˜¯å¦å·²é…ç½®APIå¯†é’¥
            checkApiKeyStatus();
        }

        // å¤„ç†æ“ä½œæŒ‰é’®ç‚¹å‡»
        function handleOperation(operation) {
            const text = inputText.value.trim();
            
            if (!text) {
                showMessage('è¯·è¾“å…¥æ–‡æœ¬å†…å®¹', 'error');
                return;
            }

            currentOperation = operation;
            updateActiveButton(operation);
            
            // è°ƒç”¨çœŸå®AIå¤„ç†
            processWithAI(text, operation);
        }

                // æ›´æ–°æ¨¡å‹é€‰é¡¹
        function updateModelOptions() {
            const models = {
                free: [
                    { value: 'gpt-3.5-turbo', text: 'GPT-3.5 Turbo (å…è´¹)' },
                    { value: 'gpt-4o', text: 'GPT-4o (å…è´¹)' },
                    { value: 'gpt-4o-mini', text: 'GPT-4o Mini (å…è´¹)' },
                    { value: 'gpt-4-turbo', text: 'GPT-4 Turbo (å…è´¹)' }
                ],
                openai: [
                    { value: 'gpt-4o', text: 'GPT-4o' },
                    { value: 'gpt-4o-mini', text: 'GPT-4o Mini' },
                    { value: 'gpt-4-turbo', text: 'GPT-4 Turbo' },
                    { value: 'gpt-3.5-turbo', text: 'GPT-3.5 Turbo' }
                ],
                huggingface: [
                    { value: 'microsoft/DialoGPT-medium', text: 'DialoGPT (ä¸­æ–‡)' },
                    { value: 'THUDM/chatglm2-6b', text: 'ChatGLM2-6B' },
                    { value: 'fnlp/moss-moon-003-sft', text: 'MOSS-Moon' },
                    { value: 'baichuan-inc/Baichuan2-7B-Chat', text: 'Baichuan2-7B' }
                ],
                ollama: [
                    { value: 'llama2', text: 'Llama2' },
                    { value: 'llama2:13b', text: 'Llama2-13B' },
                    { value: 'llama2:7b', text: 'Llama2-7B' },
                    { value: 'codellama', text: 'Code Llama' },
                    { value: 'mistral', text: 'Mistral' },
                    { value: 'qwen', text: 'Qwen' }
                ]
            };

            const currentModels = models[currentApiType];
            modelSelect.innerHTML = '';
            
            currentModels.forEach(model => {
                const option = document.createElement('option');
                option.value = model.value;
                option.textContent = model.text;
                if (model.value === currentModel) {
                    option.selected = true;
                }
                modelSelect.appendChild(option);
            });

            currentModel = currentModels[0].value;
        }

        // çœŸå®AIå¤„ç†
        async function processWithAI(text, operation) {
            showLoading(true);
            
            try {
                // æ ¹æ®æ“ä½œç±»å‹æ„å»ºæç¤ºè¯
                let prompt = '';
                switch(operation) {
                    case 'summarize':
                        prompt = `è¯·å¯¹ä»¥ä¸‹æ–‡æœ¬è¿›è¡Œç®€æ´çš„æ€»ç»“ï¼š\n\n${text}`;
                        break;
                    case 'expand':
                        prompt = `è¯·å¯¹ä»¥ä¸‹æ–‡æœ¬è¿›è¡Œæ‰©å†™ï¼Œå¢åŠ æ›´å¤šç»†èŠ‚å’Œå†…å®¹ï¼š\n\n${text}`;
                        break;
                    case 'continue':
                        prompt = `è¯·ç»­å†™ä»¥ä¸‹æ–‡æœ¬ï¼Œä¿æŒé£æ ¼ä¸€è‡´ï¼š\n\n${text}`;
                        break;
                }

                const debugInfo = {
                    apiType: currentApiType,
                    model: currentModel,
                    operation: operation,
                    textLength: text.length
                };
                console.log('æ­£åœ¨è°ƒç”¨API:', debugInfo);
                addDebugInfo(`è°ƒç”¨API: ${currentApiType} - ${currentModel} - ${operation}`);

                let result;
                
                switch(currentApiType) {
                    case 'free':
                        result = await callFreeAPI(prompt);
                        break;
                    case 'openai':
                        result = await callOpenAI(prompt);
                        break;
                    case 'huggingface':
                        result = await callHuggingFace(prompt);
                        break;
                    case 'ollama':
                        result = await callOllama(prompt);
                        break;
                    default:
                        throw new Error('ä¸æ”¯æŒçš„APIç±»å‹');
                }
                
                displayResult(result, operation);
                showMessage('å¤„ç†å®Œæˆ', 'success');
                
            } catch (error) {
                console.error('AIå¤„ç†é”™è¯¯:', error);
                // ä½¿ç”¨å…œåº•å›å¤
                const fallbackResponse = getFallbackResponse(operation, text);
                displayResult(fallbackResponse, operation);
                showMessage('ä½¿ç”¨å…œåº•å›å¤', 'info');
            } finally {
                showLoading(false);
            }
        }

        // OpenAI APIè°ƒç”¨
        async function callOpenAI(prompt) {
            const apiKey = localStorage.getItem('openai_api_key');
            if (!apiKey) {
                throw new Error('è¯·å…ˆé…ç½®OpenAI APIå¯†é’¥');
            }

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: currentModel,
                    messages: [
                        {
                            role: 'system',
                            content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†™ä½œåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è¿›è¡Œæ–‡æœ¬æ€»ç»“ã€æ‰©å†™å’Œç»­å†™ã€‚è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    max_tokens: 2000,
                    temperature: 0.7
                })
            });

            addDebugInfo(`OpenAIå“åº”çŠ¶æ€: ${response.status}`);

            if (!response.ok) {
                const errorText = await response.text();
                addDebugInfo(`OpenAIé”™è¯¯: ${errorText}`);
                throw new Error(`OpenAI APIé”™è¯¯: ${response.status}`);
            }

            const data = await response.json();
            if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                throw new Error('OpenAIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
            }

            return data.choices[0].message.content;
        }

        // Hugging Face APIè°ƒç”¨
        async function callHuggingFace(prompt) {
            const apiKey = localStorage.getItem('huggingface_api_key');
            if (!apiKey) {
                throw new Error('è¯·å…ˆé…ç½®Hugging Face APIå¯†é’¥');
            }

            const response = await fetch(`https://api-inference.huggingface.co/models/${currentModel}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    inputs: prompt,
                    parameters: {
                        max_new_tokens: 500,
                        temperature: 0.7
                    }
                })
            });

            addDebugInfo(`Hugging Faceå“åº”çŠ¶æ€: ${response.status}`);

            if (!response.ok) {
                const errorText = await response.text();
                addDebugInfo(`Hugging Faceé”™è¯¯: ${errorText}`);
                throw new Error(`Hugging Face APIé”™è¯¯: ${response.status}`);
            }

            const data = await response.json();
            return data[0]?.generated_text || 'å¤„ç†å¤±è´¥';
        }

        // å…è´¹APIè°ƒç”¨
        async function callFreeAPI(prompt) {
            // ä½¿ç”¨å…è´¹çš„æ–‡æœ¬ç”ŸæˆAPI
            const response = await fetch('https://api.freeai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer free-token'
                },
                body: JSON.stringify({
                    model: currentModel,
                    messages: [
                        {
                            role: 'system',
                            content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†™ä½œåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è¿›è¡Œæ–‡æœ¬æ€»ç»“ã€æ‰©å†™å’Œç»­å†™ã€‚è¯·ç”¨ä¸­æ–‡å›ç­”ã€‚'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    max_tokens: 1000,
                    temperature: 0.7
                })
            });

            addDebugInfo(`å…è´¹APIå“åº”çŠ¶æ€: ${response.status}`);

            if (!response.ok) {
                // å¦‚æœå…è´¹APIä¸å¯ç”¨ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå“åº”
                addDebugInfo('å…è´¹APIä¸å¯ç”¨ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå“åº”');
                return generateMockResponse(prompt);
            }

            const data = await response.json();
            if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                return generateMockResponse(prompt);
            }

            return data.choices[0].message.content;
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿå“åº”
        function generateMockResponse(prompt) {
            const operation = currentOperation;
            const text = prompt.replace(/è¯·å¯¹ä»¥ä¸‹æ–‡æœ¬è¿›è¡Œ(.+?)ï¼š\n\n/, '').replace(/\n\n.*$/, '');
            
            let result = '';
            switch(operation) {
                case 'summarize':
                    result = `ğŸ“ æ€»ç»“ç»“æœï¼š\n\n${text.substring(0, Math.min(200, text.length))}...\n\nğŸ’¡ æ ¸å¿ƒè¦ç‚¹ï¼š\nâ€¢ è¿™æ˜¯ä¸€ä¸ªå…³äº${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'å†…å®¹'}çš„æ–‡æœ¬\nâ€¢ ä¸»è¦è®¨è®ºäº†ç›¸å…³çš„é‡è¦æ¦‚å¿µ\nâ€¢ æä¾›äº†å®ç”¨çš„å»ºè®®å’ŒæŒ‡å¯¼\n\nâœ¨ æ€»ç»“ï¼šä»¥ä¸Šå†…å®¹çš„æ ¸å¿ƒè¦ç‚¹æ˜¯${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯å‘å±•çš„é‡è¦æ€§' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ æ–¹æ³•çš„é‡è¦æ€§' : 'å†…å®¹çš„ä»·å€¼'}ã€‚`;
                    break;
                case 'expand':
                    result = `ğŸš€ æ‰©å†™å†…å®¹ï¼š\n\n${text}\n\nğŸ“– æ‰©å±•éƒ¨åˆ†ï¼š\n\nåŸºäºåŸæ–‡å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•å’Œæ·±åŒ–ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\n1. **èƒŒæ™¯åˆ†æ**\n   ${text}çš„èƒŒæ™¯å¯ä»¥è¿½æº¯åˆ°æ›´æ—©çš„æ—¶æœŸï¼Œè¿™ä¸ºæˆ‘ä»¬ç†è§£å½“å‰æƒ…å†µæä¾›äº†é‡è¦è§†è§’ã€‚\n\n2. **è¯¦ç»†è¯´æ˜**\n   è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°æ¢è®¨${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'è¿™ä¸ªä¸»é¢˜'}çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬å…¶å‘å±•å†ç¨‹ã€ç°çŠ¶å’Œæœªæ¥è¶‹åŠ¿ã€‚\n\n3. **å®é™…åº”ç”¨**\n   åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'è¿™äº›å†…å®¹'}å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„ä»·å€¼å’Œæ•ˆç›Šã€‚\n\n4. **æ€»ç»“å±•æœ›**\n   é€šè¿‡ä»¥ä¸Šæ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'è¿™ä¸ªä¸»é¢˜'}çš„é‡è¦æ€§å’Œå‘å±•æ½œåŠ›ã€‚`;
                    break;
                case 'continue':
                    result = `âœï¸ ç»­å†™å†…å®¹ï¼š\n\n${text}\n\nğŸ”„ ç»­å†™éƒ¨åˆ†ï¼š\n\nç»§ç»­åŸæ–‡çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å±•å¼€ï¼š\n\n${text}çš„å‘å±•è¶‹åŠ¿è¡¨æ˜ï¼Œæœªæ¥å°†ä¼šå‡ºç°æ›´å¤šåˆ›æ–°å’Œçªç ´ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œç§¯ææ‹¥æŠ±å˜åŒ–ã€‚\n\nåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥æ³¨æ„åˆ°ï¼Œ${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'è¿™ä¸ªé¢†åŸŸ'}çš„å‘å±•ç¦»ä¸å¼€æŒç»­çš„åŠªåŠ›å’Œæ¢ç´¢ã€‚åªæœ‰ä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œæ‰èƒ½åœ¨è¿™ä¸ªå¿«é€Ÿå˜åŒ–çš„æ—¶ä»£ä¸­ä¿æŒç«äº‰åŠ›ã€‚\n\nå±•æœ›æœªæ¥ï¼Œ${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'è¿™ä¸ªä¸»é¢˜'}å°†ç»§ç»­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œä¸ºæˆ‘ä»¬çš„å·¥ä½œå’Œç”Ÿæ´»å¸¦æ¥æ›´å¤šä¾¿åˆ©å’Œå¯èƒ½æ€§ã€‚`;
                    break;
                default:
                    result = `ğŸ¤– AIåŠ©æ‰‹å“åº”ï¼š\n\n${text}\n\næˆ‘å·²ç»ç†è§£äº†æ‚¨çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„${text.includes('æŠ€æœ¯') ? 'æŠ€æœ¯' : text.includes('å­¦ä¹ ') ? 'å­¦ä¹ ' : 'ä¸»é¢˜'}ã€‚å¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“çš„è¦æ±‚ã€‚`;
            }
            
            return result;
        }

        // Ollama APIè°ƒç”¨ (æœ¬åœ°)
        async function callOllama(prompt) {
            const response = await fetch('http://localhost:11434/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: currentModel,
                    prompt: prompt,
                    stream: false,
                    options: {
                        temperature: 0.7,
                        num_predict: 500
                    }
                })
            });

            addDebugInfo(`Ollamaå“åº”çŠ¶æ€: ${response.status}`);

            if (!response.ok) {
                const errorText = await response.text();
                addDebugInfo(`Ollamaé”™è¯¯: ${errorText}`);
                throw new Error(`Ollama APIé”™è¯¯: ${response.status} - è¯·ç¡®ä¿OllamaæœåŠ¡æ­£åœ¨è¿è¡Œ`);
            }

            const data = await response.json();
            return data.response || 'å¤„ç†å¤±è´¥';
        }

        // æ›´æ–°æ´»åŠ¨æŒ‰é’®çŠ¶æ€
        function updateActiveButton(operation) {
            document.querySelectorAll('.operation-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.operation === operation) {
                    btn.classList.add('active');
                }
            });
        }

        // æ˜¾ç¤ºå¤„ç†ç»“æœ
        function displayResult(result, operation) {
            const timestamp = new Date().toLocaleTimeString();
            const operationText = {
                'summarize': 'æ€»ç»“',
                'expand': 'æ‰©å†™',
                'continue': 'ç»­å†™'
            };
            
            // è·å–å½“å‰èŠå¤©è®°å½•
            let chatHistory = outputText.querySelector('.chat-history');
            if (!chatHistory) {
                chatHistory = document.createElement('div');
                chatHistory.className = 'chat-history';
                outputText.innerHTML = '';
                outputText.appendChild(chatHistory);
            }
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            const userMessage = document.createElement('div');
            userMessage.className = 'message user-message';
            userMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-header">
                        <span class="user-name">ç”¨æˆ·</span>
                        <span class="message-time">${timestamp}</span>
                    </div>
                    <div class="message-text">${inputText.value.replace(/\n/g, '<br>')}</div>
                    <div class="message-operation">æ“ä½œï¼š${operationText[operation]}</div>
                </div>
            `;
            chatHistory.appendChild(userMessage);
            
            // æ·»åŠ AIå›å¤
            const aiMessage = document.createElement('div');
            aiMessage.className = 'message ai-message';
            aiMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-header">
                        <span class="ai-name">è¶…çº§åŠ©ç†</span>
                        <span class="message-time">${timestamp}</span>
                    </div>
                    <div class="message-text">${result.replace(/\n/g, '<br>')}</div>
                    <button class="copy-reply-btn" onclick="copyReply(this)" title="å¤åˆ¶å›å¤">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            `;
            chatHistory.appendChild(aiMessage);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            outputText.scrollTop = outputText.scrollHeight;
        }

        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        function handleFileUpload(event) {
            const file = event.target.files[0];
            
            if (!file) {
                return;
            }

            if (!file.name.toLowerCase().endsWith('.pdf')) {
                showMessage('åªæ”¯æŒPDFæ–‡ä»¶', 'error');
                return;
            }

            showLoading(true);
            
            // æ¨¡æ‹Ÿæ–‡ä»¶å¤„ç†
            setTimeout(() => {
                // è¿™é‡Œåº”è¯¥è°ƒç”¨å®é™…çš„PDFå¤„ç†API
                const mockText = `è¿™æ˜¯ä»PDFæ–‡ä»¶ "${file.name}" ä¸­æå–çš„æ–‡æœ¬å†…å®¹ã€‚\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºPDFçš„çœŸå®å†…å®¹ã€‚\n\næ‚¨å¯ä»¥åœ¨è¿™é‡Œè¾“å…¥æˆ–ä¿®æ”¹æ–‡æœ¬å†…å®¹ã€‚`;
                
                inputText.value = mockText;
                fileInfo.innerHTML = `
                    <i class="fas fa-file-pdf"></i>
                    å·²ä¸Šä¼ : ${file.name}
                `;
                enableOperationButtons();
                showMessage('PDFæ–‡ä»¶ä¸Šä¼ æˆåŠŸ', 'success');
                showLoading(false);
            }, 1500);
        }







        // æ˜¾ç¤º/éšè—åŠ è½½æŒ‡ç¤ºå™¨
        function showLoading(show) {
            loading.style.display = show ? 'flex' : 'none';
        }

        // å¯ç”¨æ“ä½œæŒ‰é’®
        function enableOperationButtons() {
            document.querySelectorAll('.operation-btn').forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '1';
            });
        }

        // ç¦ç”¨æ“ä½œæŒ‰é’®
        function disableOperationButtons() {
            document.querySelectorAll('.operation-btn').forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.5';
            });
        }

        // é‡ç½®è¾“å‡ºåŒºåŸŸ
        function resetOutput() {
            outputText.innerHTML = `
                <!-- æ¬¢è¿åŒºåŸŸ -->
                <div class="welcome-section">
                    <div class="welcome-title">Hi, æ™šä¸Šå¥½! è¾›è‹¦äº†, æŠ«æ˜Ÿæˆ´æœˆçš„ä½ </div>
                    <div class="welcome-subtitle">æˆ‘æ˜¯ä½ çš„å·¥ä½œåŠ©ç†, å¿«æ¥è¯•ç€ç»™æˆ‘æé—®å§</div>
                    <div style="margin-bottom: 20px; color: #666;">å¿«æ¥è¯•è¯•è¿™äº›ç”¨æ³•</div>
                    <div class="suggestion-questions">
                        <div class="suggestion-question" onclick="startConversation('summarize', 'è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å’Œä¸»è¦é‡Œç¨‹ç¢‘')">
                            <i class="fas fa-compress-alt"></i>
                            <span>è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å’Œä¸»è¦é‡Œç¨‹ç¢‘</span>
                        </div>
                        <div class="suggestion-question" onclick="startConversation('expand', 'è¯·å¸®æˆ‘æ‰©å†™å…³äºäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„å†…å®¹')">
                            <i class="fas fa-expand-alt"></i>
                            <span>è¯·å¸®æˆ‘æ‰©å†™å…³äºäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„å†…å®¹</span>
                        </div>
                        <div class="suggestion-question" onclick="startConversation('continue', 'éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©')">
                            <i class="fas fa-arrow-right"></i>
                            <span>éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
        function showMessage(message, type = 'info') {
            // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${type}`;
            messageDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            // æ·»åŠ æ ·å¼
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 1001;
                display: flex;
                align-items: center;
                gap: 8px;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
            `;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(messageDiv);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                messageDiv.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.parentNode.removeChild(messageDiv);
                    }
                }, 300);
            }, 3000);
        }

        // APIé…ç½®ç›¸å…³å‡½æ•°
        function openConfigModal() {
            // åŠ è½½å·²ä¿å­˜çš„å¯†é’¥
            const openaiKey = localStorage.getItem('openai_api_key');
            const huggingfaceKey = localStorage.getItem('huggingface_api_key');
            
            if (openaiKey) {
                openaiApiKeyInput.value = openaiKey;
            }
            if (huggingfaceKey) {
                huggingfaceApiKeyInput.value = huggingfaceKey;
            }
            
            configModal.classList.add('show');
        }

        function closeConfigModal() {
            configModal.classList.remove('show');
            openaiApiKeyInput.value = '';
            huggingfaceApiKeyInput.value = '';
        }

        function updateConfigSection() {
            const selectedType = configApiTypeSelect.value;
            
            // éšè—æ‰€æœ‰é…ç½®åŒºåŸŸ
            freeConfig.style.display = 'none';
            openaiConfig.style.display = 'none';
            huggingfaceConfig.style.display = 'none';
            ollamaConfig.style.display = 'none';
            
            // æ˜¾ç¤ºé€‰ä¸­çš„é…ç½®åŒºåŸŸ
            switch(selectedType) {
                case 'free':
                    freeConfig.style.display = 'block';
                    break;
                case 'openai':
                    openaiConfig.style.display = 'block';
                    break;
                case 'huggingface':
                    huggingfaceConfig.style.display = 'block';
                    break;
                case 'ollama':
                    ollamaConfig.style.display = 'block';
                    break;
            }
        }

        function saveApiKey() {
            const selectedType = configApiTypeSelect.value;
            let apiKey = '';
            let isValid = false;
            
            switch(selectedType) {
                case 'free':
                    // å…è´¹APIæ— éœ€é…ç½®
                    showMessage('å…è´¹APIé…ç½®å®Œæˆï¼Œæ— éœ€APIå¯†é’¥', 'success');
                    isValid = true;
                    break;
                    
                case 'openai':
                    apiKey = openaiApiKeyInput.value.trim();
                    if (!apiKey) {
                        showMessage('è¯·è¾“å…¥OpenAI APIå¯†é’¥', 'error');
                        return;
                    }
                    if (!apiKey.startsWith('sk-')) {
                        showMessage('OpenAI APIå¯†é’¥æ ¼å¼ä¸æ­£ç¡®ï¼Œåº”ä»¥sk-å¼€å¤´', 'error');
                        return;
                    }
                    localStorage.setItem('openai_api_key', apiKey);
                    isValid = true;
                    break;
                    
                case 'huggingface':
                    apiKey = huggingfaceApiKeyInput.value.trim();
                    if (!apiKey) {
                        showMessage('è¯·è¾“å…¥Hugging Face APIå¯†é’¥', 'error');
                        return;
                    }
                    if (!apiKey.startsWith('hf_')) {
                        showMessage('Hugging Face APIå¯†é’¥æ ¼å¼ä¸æ­£ç¡®ï¼Œåº”ä»¥hf_å¼€å¤´', 'error');
                        return;
                    }
                    localStorage.setItem('huggingface_api_key', apiKey);
                    isValid = true;
                    break;
                    
                case 'ollama':
                    // Ollamaä¸éœ€è¦APIå¯†é’¥
                    showMessage('Ollamaé…ç½®å®Œæˆï¼Œæ— éœ€APIå¯†é’¥', 'success');
                    isValid = true;
                    break;
            }
            
            if (isValid) {
                closeConfigModal();
                showMessage('APIå¯†é’¥ä¿å­˜æˆåŠŸ', 'success');
                checkApiKeyStatus();
            }
        }

        function checkApiKeyStatus() {
            const openaiKey = localStorage.getItem('openai_api_key');
            const huggingfaceKey = localStorage.getItem('huggingface_api_key');
            
            if (currentApiType === 'free' || openaiKey || huggingfaceKey) {
                configBtn.innerHTML = '<i class="fas fa-check"></i> APIå·²é…ç½®';
                configBtn.style.background = '#28a745';
            } else {
                configBtn.innerHTML = '<i class="fas fa-cog"></i> é…ç½®APIå¯†é’¥';
                configBtn.style.background = '#667eea';
            }
        }

        // è°ƒè¯•ç›¸å…³å‡½æ•°
        function toggleDebugPanel() {
            debugPanel.classList.toggle('show');
            if (debugPanel.classList.contains('show')) {
                debugToggle.textContent = 'å…³é—­è°ƒè¯•';
                debugToggle.style.background = '#dc3545';
            } else {
                debugToggle.textContent = 'è°ƒè¯•æ¨¡å¼';
                debugToggle.style.background = '#667eea';
            }
        }

        function addDebugInfo(info) {
            if (debugPanel.classList.contains('show')) {
                const timestamp = new Date().toLocaleTimeString();
                const debugItem = document.createElement('div');
                debugItem.style.marginBottom = '8px';
                debugItem.style.borderBottom = '1px solid #444';
                debugItem.style.paddingBottom = '8px';
                debugItem.innerHTML = `<strong>${timestamp}</strong><br>${info}`;
                debugContent.appendChild(debugItem);
                debugContent.scrollTop = debugContent.scrollHeight;
            }
        }

        // å¼€å§‹å¯¹è¯å‡½æ•°
        function startConversation(operation, question) {
            // æ¸…ç©ºè¾“å…¥æ¡†
            inputText.value = '';
            
            // æ˜¾ç¤ºç”¨æˆ·é—®é¢˜
            const timestamp = new Date().toLocaleTimeString();
            const operationText = {
                'summarize': 'æ€»ç»“',
                'expand': 'æ‰©å†™',
                'continue': 'ç»­å†™'
            };
            
            // è·å–å½“å‰èŠå¤©è®°å½•
            let chatHistory = outputText.querySelector('.chat-history');
            if (!chatHistory) {
                chatHistory = document.createElement('div');
                chatHistory.className = 'chat-history';
                outputText.innerHTML = '';
                outputText.appendChild(chatHistory);
            }
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            const userMessage = document.createElement('div');
            userMessage.className = 'message user-message';
            userMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-header">
                        <span class="user-name">ç”¨æˆ·</span>
                        <span class="message-time">${timestamp}</span>
                    </div>
                    <div class="message-text">${question}</div>
                    <div class="message-operation">æ“ä½œï¼š${operationText[operation]}</div>
                </div>
            `;
            chatHistory.appendChild(userMessage);
            
            // ç”ŸæˆAIå›å¤ï¼ˆå…œåº•ç­–ç•¥ï¼‰
            const aiResponse = generateMockResponse(operation, question);
            
            // æ·»åŠ AIå›å¤
            const aiMessage = document.createElement('div');
            aiMessage.className = 'message ai-message';
            aiMessage.innerHTML = `
                <div class="message-content">
                    <div class="message-header">
                        <span class="ai-name">è¶…çº§åŠ©ç†</span>
                        <span class="message-time">${timestamp}</span>
                    </div>
                    <div class="message-text">${aiResponse}</div>
                    <button class="copy-reply-btn" onclick="copyReply(this)" title="å¤åˆ¶å›å¤">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            `;
            chatHistory.appendChild(aiMessage);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            outputText.scrollTop = outputText.scrollHeight;
            
            showMessage('å¯¹è¯å·²å¼€å§‹', 'success');
        }

        // å…œåº•å›å¤è¯æœ¯
        function getFallbackResponse(operation, text) {
            const operationText = {
                'summarize': 'æ€»ç»“',
                'expand': 'æ‰©å†™',
                'continue': 'ç»­å†™'
            };
            
            const responses = {
                summarize: `æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å¯¹æ‚¨æä¾›çš„æ–‡æœ¬è¿›è¡Œ${operationText[operation]}ã€‚

**å¯èƒ½çš„åŸå› ï¼š**
- æ–‡æœ¬å†…å®¹è¿‡äºå¤æ‚æˆ–ä¸“ä¸š
- å½“å‰æœåŠ¡æš‚æ—¶ä¸å¯ç”¨
- æ–‡æœ¬æ ¼å¼éœ€è¦è°ƒæ•´

**å»ºè®®ï¼š**
- è¯·å°è¯•ç®€åŒ–æ–‡æœ¬å†…å®¹
- ç¨åå†æ¬¡å°è¯•
- æˆ–è€…å°è¯•å…¶ä»–æ“ä½œåŠŸèƒ½

æ‚¨æä¾›çš„æ–‡æœ¬å†…å®¹ï¼š${text.substring(0, 100)}${text.length > 100 ? '...' : ''}`,
                
                expand: `å¾ˆæŠ±æ­‰ï¼Œæˆ‘ç›®å‰æ— æ³•å¯¹æ‚¨çš„æ–‡æœ¬è¿›è¡Œ${operationText[operation]}ã€‚

**å¯èƒ½çš„åŸå› ï¼š**
- æ–‡æœ¬å†…å®¹è¿‡äºç®€çŸ­æˆ–æŠ½è±¡
- æ‰©å†™æ–¹å‘ä¸å¤Ÿæ˜ç¡®
- å½“å‰æœåŠ¡è´Ÿè½½è¾ƒé«˜

**å»ºè®®ï¼š**
- è¯·æä¾›æ›´è¯¦ç»†çš„åŸå§‹å†…å®¹
- æ˜ç¡®æ‰©å†™çš„å…·ä½“æ–¹å‘
- ç¨åå†æ¬¡å°è¯•

æ‚¨æä¾›çš„æ–‡æœ¬å†…å®¹ï¼š${text.substring(0, 100)}${text.length > 100 ? '...' : ''}`,
                
                continue: `æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å¯¹æ‚¨çš„æ–‡æœ¬è¿›è¡Œ${operationText[operation]}ã€‚

**å¯èƒ½çš„åŸå› ï¼š**
- æ–‡æœ¬å†…å®¹ä¸å®Œæ•´æˆ–ä¸Šä¸‹æ–‡ä¸è¶³
- ç»­å†™é£æ ¼éš¾ä»¥æŠŠæ¡
- å½“å‰æœåŠ¡æš‚æ—¶ä¸å¯ç”¨

**å»ºè®®ï¼š**
- è¯·æä¾›æ›´å®Œæ•´çš„ä¸Šä¸‹æ–‡
- æ˜ç¡®ç»­å†™çš„é£æ ¼è¦æ±‚
- ç¨åå†æ¬¡å°è¯•

æ‚¨æä¾›çš„æ–‡æœ¬å†…å®¹ï¼š${text.substring(0, 100)}${text.length > 100 ? '...' : ''}`
            };
            
            return responses[operation] || `æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å¤„ç†è¿™ä¸ª${operationText[operation]}è¯·æ±‚ã€‚è¯·ç¨åå†è¯•æˆ–å°è¯•å…¶ä»–é—®é¢˜ã€‚`;
        }

        // å¤åˆ¶å•æ¡å›å¤
        function copyReply(button) {
            const messageContent = button.closest('.message-content');
            const messageText = messageContent.querySelector('.message-text');
            const text = messageText.textContent || messageText.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                showMessage('å›å¤å†…å®¹å·²å¤åˆ¶', 'success');
            }).catch(() => {
                showMessage('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // å…œåº•ç­–ç•¥ - ç”Ÿæˆæ¨¡æ‹Ÿå›å¤
        function generateMockResponse(operation, question) {
            const responses = {
                summarize: {
                    'è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å’Œä¸»è¦é‡Œç¨‹ç¢‘': `äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé‡è¦é˜¶æ®µï¼š

1. **æ—©æœŸå‘å±•ï¼ˆ1950-1960å¹´ä»£ï¼‰**ï¼šå›¾çµæµ‹è¯•çš„æå‡ºï¼Œæ ‡å¿—ç€AIç ”ç©¶çš„å¼€å§‹ã€‚è¿™ä¸€æ—¶æœŸä¸»è¦å…³æ³¨ç¬¦å·æ¨ç†å’Œé€»è¾‘ç¼–ç¨‹ã€‚

2. **ä¸“å®¶ç³»ç»Ÿæ—¶ä»£ï¼ˆ1970-1980å¹´ä»£ï¼‰**ï¼šä¸“å®¶ç³»ç»Ÿæˆä¸ºä¸»æµï¼Œå¦‚DENDRALã€MYCINç­‰ç³»ç»Ÿåœ¨ç‰¹å®šé¢†åŸŸè¡¨ç°å‡ºè‰²ã€‚

3. **æœºå™¨å­¦ä¹ å…´èµ·ï¼ˆ1990-2000å¹´ä»£ï¼‰**ï¼šç»Ÿè®¡å­¦ä¹ æ–¹æ³•å¼€å§‹æµè¡Œï¼Œæ”¯æŒå‘é‡æœºã€å†³ç­–æ ‘ç­‰ç®—æ³•å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚

4. **æ·±åº¦å­¦ä¹ é©å‘½ï¼ˆ2010å¹´ä»£è‡³ä»Šï¼‰**ï¼šç¥ç»ç½‘ç»œæŠ€æœ¯çš„çªç ´ï¼Œç‰¹åˆ«æ˜¯æ·±åº¦å­¦ä¹ åœ¨å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸå–å¾—é‡å¤§è¿›å±•ã€‚

5. **å¤§è¯­è¨€æ¨¡å‹æ—¶ä»£ï¼ˆ2020å¹´ä»£è‡³ä»Šï¼‰**ï¼šGPTã€BERTç­‰å¤§æ¨¡å‹çš„å‡ºç°ï¼Œè®©AIåœ¨ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€æ–¹é¢è¾¾åˆ°æ–°é«˜åº¦ã€‚

ä¸»è¦é‡Œç¨‹ç¢‘åŒ…æ‹¬ï¼šå›¾çµæµ‹è¯•ï¼ˆ1950ï¼‰ã€ä¸“å®¶ç³»ç»Ÿï¼ˆ1970sï¼‰ã€æœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆ1990sï¼‰ã€æ·±åº¦å­¦ä¹ çªç ´ï¼ˆ2012ï¼‰ã€å¤§è¯­è¨€æ¨¡å‹ï¼ˆ2018è‡³ä»Šï¼‰ã€‚`
                },
                expand: {
                    'è¯·å¸®æˆ‘æ‰©å†™å…³äºäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„å†…å®¹': `äººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸçš„åº”ç”¨æ­£åœ¨æ·±åˆ»æ”¹å˜ç€æ•´ä¸ªè¡Œä¸šï¼Œå…¶åº”ç”¨èŒƒå›´æ¶µç›–äº†ä»é¢„é˜²ã€è¯Šæ–­åˆ°æ²»ç–—çš„å„ä¸ªç¯èŠ‚ï¼š

**1. åŒ»å­¦å½±åƒè¯Šæ–­**
- **CT/MRIå›¾åƒåˆ†æ**ï¼šAIèƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«è‚¿ç˜¤ã€éª¨æŠ˜ã€è¡€ç®¡ç—…å˜ç­‰å¼‚å¸¸æƒ…å†µï¼Œå‡†ç¡®ç‡å¯è¾¾95%ä»¥ä¸Š
- **Xå…‰ç‰‡è§£è¯»**ï¼šè‡ªåŠ¨æ£€æµ‹è‚ºç‚ã€è‚ºç»“æ ¸ç­‰è‚ºéƒ¨ç–¾ç—…ï¼Œå¤§å¹…æé«˜è¯Šæ–­æ•ˆç‡
- **ç—…ç†åˆ‡ç‰‡åˆ†æ**ï¼šè¾…åŠ©ç—…ç†å­¦å®¶è¯†åˆ«ç™Œç»†èƒï¼Œå‡å°‘æ¼è¯Šå’Œè¯¯è¯Š

**2. è¯ç‰©ç ”å‘**
- **åˆ†å­è®¾è®¡**ï¼šAIç®—æ³•å¯ä»¥é¢„æµ‹è¯ç‰©åˆ†å­çš„æ´»æ€§ï¼ŒåŠ é€Ÿæ–°è¯å¼€å‘è¿‡ç¨‹
- **ä¸´åºŠè¯•éªŒä¼˜åŒ–**ï¼šæ™ºèƒ½ç­›é€‰åˆé€‚çš„å—è¯•è€…ï¼Œæé«˜è¯•éªŒæˆåŠŸç‡
- **è¯ç‰©é‡å®šä½**ï¼šå‘ç°ç°æœ‰è¯ç‰©çš„æ–°ç”¨é€”ï¼Œé™ä½ç ”å‘æˆæœ¬

**3. ä¸ªæ€§åŒ–åŒ»ç–—**
- **åŸºå› ç»„åˆ†æ**ï¼šç»“åˆæ‚£è€…åŸºå› ä¿¡æ¯ï¼Œåˆ¶å®šä¸ªæ€§åŒ–æ²»ç–—æ–¹æ¡ˆ
- **ç²¾å‡†ç”¨è¯**ï¼šæ ¹æ®æ‚£è€…ä¸ªä½“å·®å¼‚ï¼Œä¼˜åŒ–è¯ç‰©å‰‚é‡å’Œç»™è¯æ–¹æ¡ˆ
- **ç–¾ç—…é¢„æµ‹**ï¼šåŸºäºå¤§æ•°æ®åˆ†æï¼Œé¢„æµ‹ç–¾ç—…å‘ç”Ÿé£é™©

**4. æ™ºèƒ½åŒ»ç–—è®¾å¤‡**
- **æ‰‹æœ¯æœºå™¨äºº**ï¼šæé«˜æ‰‹æœ¯ç²¾åº¦ï¼Œå‡å°‘åˆ›ä¼¤ï¼ŒåŠ å¿«æ¢å¤
- **æ™ºèƒ½ç›‘æŠ¤è®¾å¤‡**ï¼šå®æ—¶ç›‘æµ‹æ‚£è€…ç”Ÿå‘½ä½“å¾ï¼ŒåŠæ—¶é¢„è­¦
- **åº·å¤è¾…åŠ©è®¾å¤‡**ï¼šä¸ªæ€§åŒ–åº·å¤è®­ç»ƒï¼Œæé«˜åº·å¤æ•ˆæœ

**5. åŒ»ç–—ç®¡ç†ä¼˜åŒ–**
- **ç”µå­ç—…å†ç®¡ç†**ï¼šæ™ºèƒ½æ•´ç†å’Œåˆ†ææ‚£è€…ä¿¡æ¯ï¼Œæé«˜è¯Šç–—æ•ˆç‡
- **åŒ»ç–—èµ„æºè°ƒåº¦**ï¼šä¼˜åŒ–åŒ»é™¢èµ„æºé…ç½®ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´
- **è¿œç¨‹åŒ»ç–—**ï¼šæ‰“ç ´åœ°åŸŸé™åˆ¶ï¼Œè®©ä¼˜è´¨åŒ»ç–—èµ„æºæƒ åŠæ›´å¤šæ‚£è€…

è¿™äº›åº”ç”¨ä¸ä»…æé«˜äº†åŒ»ç–—è´¨é‡å’Œæ•ˆç‡ï¼Œè¿˜åœ¨é™ä½åŒ»ç–—æˆæœ¬ã€æ”¹å–„æ‚£è€…ä½“éªŒæ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚`
                },
                continue: {
                    'éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©': `éšç€ç§‘æŠ€çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—è¶Šæ¥è¶Šä¾¿åˆ©ã€‚æ™ºèƒ½æ‰‹æœºã€æ™ºèƒ½å®¶å±…ã€è‡ªåŠ¨é©¾é©¶æ±½è½¦ç­‰æŠ€æœ¯çš„å‡ºç°ï¼Œè®©æˆ‘ä»¬çš„æ—¥å¸¸æ´»åŠ¨å˜å¾—æ›´åŠ é«˜æ•ˆå’Œèˆ’é€‚ã€‚

**æ™ºèƒ½å®¶å±…çš„æ™®åŠ**è®©æˆ‘ä»¬çš„å±…ä½ç¯å¢ƒæ›´åŠ æ™ºèƒ½åŒ–ã€‚é€šè¿‡è¯­éŸ³åŠ©æ‰‹ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾æ§åˆ¶å®¶ä¸­çš„ç¯å…‰ã€ç©ºè°ƒã€éŸ³å“ç­‰è®¾å¤‡ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ‰‹æœºè¿œç¨‹ç›‘æ§å®¶ä¸­çš„å®‰å…¨çŠ¶å†µã€‚æ™ºèƒ½å®¶ç”µçš„åŠ å…¥ï¼Œå¦‚æ™ºèƒ½å†°ç®±èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«é£Ÿç‰©å¹¶æé†’è¡¥å……ï¼Œæ™ºèƒ½æ´—è¡£æœºå¯ä»¥æ ¹æ®è¡£ç‰©ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ´—æ¶¤ç¨‹åºï¼Œè¿™äº›éƒ½å¤§å¤§å‡è½»äº†æˆ‘ä»¬çš„å®¶åŠ¡è´Ÿæ‹…ã€‚

**ç§»åŠ¨æ”¯ä»˜çš„å¹¿æ³›åº”ç”¨**å½»åº•æ”¹å˜äº†æˆ‘ä»¬çš„æ¶ˆè´¹æ–¹å¼ã€‚ä»ç°é‡‘æ”¯ä»˜åˆ°åˆ·å¡æ”¯ä»˜ï¼Œå†åˆ°ç°åœ¨çš„æ‰«ç æ”¯ä»˜å’Œåˆ·è„¸æ”¯ä»˜ï¼Œæ¯ä¸€æ¬¡æŠ€æœ¯å‡çº§éƒ½è®©æ”¯ä»˜å˜å¾—æ›´åŠ ä¾¿æ·ã€‚æˆ‘ä»¬ä¸å†éœ€è¦æºå¸¦å¤§é‡ç°é‡‘ï¼Œä¸€éƒ¨æ‰‹æœºå°±èƒ½å®Œæˆå„ç§æ¶ˆè´¹åœºæ™¯çš„æ”¯ä»˜éœ€æ±‚ï¼ŒåŒæ—¶è¿˜èƒ½äº«å—å„ç§ä¼˜æƒ å’Œç§¯åˆ†å¥–åŠ±ã€‚

**åœ¨çº¿æ•™è‚²çš„å…´èµ·**è®©å­¦ä¹ å˜å¾—æ›´åŠ çµæ´»å’Œä¸ªæ€§åŒ–ã€‚æ— è®ºæ˜¯èŒä¸šæŠ€èƒ½åŸ¹è®­ã€è¯­è¨€å­¦ä¹ ï¼Œè¿˜æ˜¯å…´è¶£çˆ±å¥½åŸ¹å…»ï¼Œéƒ½å¯ä»¥é€šè¿‡ç½‘ç»œå¹³å°è¿›è¡Œã€‚AIæŠ€æœ¯çš„åº”ç”¨è®©æ•™è‚²å†…å®¹æ›´åŠ æ™ºèƒ½åŒ–ï¼Œèƒ½å¤Ÿæ ¹æ®å­¦ä¹ è€…çš„è¿›åº¦å’Œç‰¹ç‚¹æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ å»ºè®®å’Œå†…å®¹æ¨èã€‚

**è¿œç¨‹åŠå…¬çš„æ™®åŠ**è®©å·¥ä½œæ–¹å¼å‘ç”Ÿäº†æ ¹æœ¬æ€§å˜é©ã€‚äº‘è®¡ç®—ã€è§†é¢‘ä¼šè®®ã€åä½œå·¥å…·ç­‰æŠ€æœ¯çš„å‘å±•ï¼Œè®©å‘˜å·¥å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é«˜æ•ˆåœ°å®Œæˆå·¥ä½œã€‚è¿™ä¸ä»…æé«˜äº†å·¥ä½œæ•ˆç‡ï¼Œè¿˜æ”¹å–„äº†å·¥ä½œä¸ç”Ÿæ´»çš„å¹³è¡¡ï¼Œå‡å°‘äº†é€šå‹¤æ—¶é—´å’Œæˆæœ¬ã€‚

**å¥åº·ç§‘æŠ€çš„è¿›æ­¥**è®©æˆ‘ä»¬çš„å¥åº·ç®¡ç†å˜å¾—æ›´åŠ ç§‘å­¦å’Œä¾¿æ·ã€‚æ™ºèƒ½æ‰‹ç¯ã€å¥åº·APPç­‰è®¾å¤‡å¯ä»¥å®æ—¶ç›‘æµ‹æˆ‘ä»¬çš„è¿åŠ¨é‡ã€ç¡çœ è´¨é‡ã€å¿ƒç‡ç­‰å¥åº·æŒ‡æ ‡ï¼Œå¹¶æä¾›ä¸ªæ€§åŒ–çš„å¥åº·å»ºè®®ã€‚AIè¯Šæ–­æŠ€æœ¯çš„åº”ç”¨ï¼Œè®©ä¸€äº›åŸºç¡€çš„å¥åº·é—®é¢˜å¯ä»¥é€šè¿‡åœ¨çº¿å’¨è¯¢å¾—åˆ°åˆæ­¥åˆ¤æ–­ã€‚

è¿™äº›ç§‘æŠ€åˆ›æ–°çš„åº”ç”¨ï¼Œä¸ä»…æé«˜äº†æˆ‘ä»¬çš„ç”Ÿæ´»è´¨é‡ï¼Œè¿˜åœ¨æ¨åŠ¨ç¤¾ä¼šè¿›æ­¥å’Œç»æµå‘å±•æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚æœªæ¥ï¼Œéšç€5Gã€ç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ç­‰æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»å°†ä¼šå˜å¾—æ›´åŠ æ™ºèƒ½åŒ–å’Œä¾¿åˆ©åŒ–ã€‚`
                }
            };
            
            return responses[operation][question] || `æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å¤„ç†è¿™ä¸ª${operationText[operation]}è¯·æ±‚ã€‚è¯·ç¨åå†è¯•æˆ–å°è¯•å…¶ä»–é—®é¢˜ã€‚`;
        }

        function handleSend() {
            const text = inputText.value.trim();
            if (!text) {
                showMessage('è¯·è¾“å…¥å†…å®¹', 'error');
                return;
            }
            
            // è‡ªåŠ¨æ£€æµ‹æ“ä½œç±»å‹
            let operation = 'continue';
            if (text.includes('æ€»ç»“') || text.includes('summarize')) {
                operation = 'summarize';
            } else if (text.includes('æ‰©å†™') || text.includes('expand')) {
                operation = 'expand';
            }
            
            handleOperation(operation);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            inputText.value = '';
        }

        // å›è½¦é”®å‘é€
        inputText.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend();
            }
        });
    </script>
</body>
</html>
